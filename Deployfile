pipeline{

  agent any
  
  tools {
    
       maven 'Apache Maven 3.6.0' 
       }
	triggers {
	
pollSCM('H/4 * * * *')
}
  stages{
    
     stage('Build Java Application'){
       steps{
         script{
           sh 'mvn clean package'
         }
       }
         
    }
     stage('Ansible deployment'){
       steps{
         script{
           sh "ansible-playbook main.yml -i inventories/dev/hosts -- user jenkins --key-file ~/.ssh/id_rsa"
         }
       }
         
    }
   }
  }
