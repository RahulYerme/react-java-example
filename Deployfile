pipeline{

  agent any
  
  tools {
    
       maven 'Apache Maven 3.6.0' 
       }
	triggers {
	
pollSCM('H/4 * * * *')
}
  stages{
    
     stage('Build Java Application'){
       steps{
         script{
           sh 'mvn clean package'
         }
       }
         
    }
     stage('Ansible deployment'){
       steps{
         script{
	   sh "cd /etc/ansible"
           sh "ansible-playbook javaappdeploy.yml -i /etc/ansible/inventory.txt --user jenkins --key-file ~/.ssh/id_rsa"
         }
       }
         
    }
   }
  }
